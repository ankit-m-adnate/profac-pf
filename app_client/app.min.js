!function(){function e(e,t,n,o){e.defaults.withCredentials=!0,e.interceptors.push("errorInterceptor"),t.when("/payment/failure",{templateUrl:"payments/paymentFailure.html",controller:"paymentFailureController"}).when("/",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm",label:"Welcome"}).when("/setup",{templateUrl:"/setup/setup.view.html",controller:"setupCtrl",controllerAs:"vm",label:"Setup"}).when("/register",{templateUrl:"/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm",label:"Register"}).when("/forgot",{templateUrl:"/auth/forgot/forgot.view.html",controller:"forgotCtrl",controllerAs:"vm",label:"Forgot Password"}).when("/home",{templateUrl:"/home/home.view.html",controller:"homeCtrl",controllerAs:"vm",label:"Home"}).when("/master",{templateUrl:"/admin/apps.view.html",controller:"appsCtrl",controllerAs:"vm",label:"Admin"}).when("/login",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm",label:"Login"}).when("/account",{templateUrl:"/account/account.view.html",controller:"accountCtrl",controllerAs:"vm"}).when("/choosePlan",{templateUrl:"choosePlan/choosePlan.html",controller:"choosePlanController"}).otherwise({redirectTo:"/"}),n.html5Mode({enabled:!1,requireBase:!1}),o.theme("grey","default").primaryPalette("grey"),o.theme("input")}function t(e,t,n){"/choosePlan"==t.path()&&t.search().access_token&&n.saveToken(t.search().access_token),"/register"===t.path()||"/login"===t.path()||"/"===t.path()||"/forgot"===t.path()||"/choosePlan"===t.path()||n.isLoggedIn()||t.path("/"),!n.isLoggedIn()||"/register"!==t.path()&&"/login"!==t.path()&&"/"!==t.path()||t.path("/home"),n.isLoggedIn()&&1==n.currentUser()._imft&&"/choosePlan"!==t.path()&&t.path("/setup"),e.$on("$routeChangeStart",function(){"/choosePlan"==t.path()&&t.search().access_token&&n.saveToken(t.search().access_token),"/register"===t.path()||"/login"===t.path()||"/"===t.path()||"/forgot"===t.path()||"/choosePlan"===t.path()||n.isLoggedIn()||t.path("/"),!n.isLoggedIn()||"/register"!==t.path()&&"/login"!==t.path()&&"/"!==t.path()||t.path("/home"),n.isLoggedIn()&&1==n.currentUser()._imft&&"/choosePlan"!==t.path()&&t.path("/setup")})}angular.module("processFactory",["ngRoute","ngMaterial","ngAnimate","ngAria","ngMessages","angular.filter","ng-breadcrumbs","gridster","angular-loading-bar","ngDraggable","md.data.table","ngFileUpload"]),angular.module("processFactory").config(["$httpProvider","$routeProvider","$locationProvider","$mdThemingProvider",e]).run(["$rootScope","$location","authentication",t]).factory("errorInterceptor",function(e,t){var n=!1;return{request:function(t){return n?void 0:t||e.when(t)},requestError:function(t){return e.reject(t)},response:function(t){return t||e.when(t)},responseError:function(n){return n&&401===n.status&&(t.localStorage.removeItem("_pft"),t.location.href=window.location.origin),e.reject(n)}}})}(),function(){function e(e,t,n,o,r,a){function i(){s.notification="",s.getUserProfileLoading=!0,e.get("/users/getPFProfile/"+s.currentUser.email).then(function(e){s.userDetails=e.data,s.getUserProfileLoading=!1,s.otptry=s.userDetails.otp?s.userDetails.otp.retries:0},function(){s.getUserProfileLoading=!1})}function c(){s.getOrganizationDeatilsLoading=!0,e.get("/pFactory/getOrgPlans/"+s.currentUser.org).then(function(e){s.orgDetails=e.data,s.getOrganizationDeatilsLoading=!1},function(){s.getOrganizationDeatilsLoading=!1})}var s=this;s.currentUser=o.currentUser(),s.getOrganizationDeatilsLoading=!0,s.getUserProfileLoading=!0,s.countDown_text=0,s.profile={first_name:s.currentUser.fn,last_name:s.currentUser.ln,email:s.currentUser.email,mobile:s.currentUser._m},s.verifyMobile=function(t){e.post("/users/verifyMobile",{_i:s.currentUser._id,_m:s.currentUser._m,_t:t+1}).then(function(){i()},function(){s.notification="This service is currently unavailable."})},s.otpAlive=function(){if(!s.getUserProfileLoading&&s.userDetails.otp){var e=new Date;s.ex=new Date(s.userDetails.otp.expires);var t=(s.ex.getTime()-e.getTime())/1e3;return"N"==s.userDetails.mobileVerified&&t>0?!0:!1}return!1},s.submitOTP=function(){e.post("/users/submitOTP",{_i:s.currentUser._id,_c:s.otp}).then(function(){i()},function(e){s.notification=e.data.message})},c(),i(),s.forMobile=function(e){e.keyCode>=48&&e.keyCode<=57||9==e.keyCode||8==e.keyCode||46==e.keyCode||37==e.keyCode||39==e.keyCode||e.preventDefault()},s.openMenu=function(e,t){originatorEv=t,e(t),$("#profileMenu").addClass("arr-down")},a.$on("$mdMenuClose",function(){$("#profileMenu").removeClass("arr-down")}),s.logout=function(){e.get("/pFactory/logout/").then(function(e){200===e.status&&(o.logout(),r.path("/"))}).catch(function(){}).finally(function(){})}}angular.module("processFactory").controller("accountCtrl",e),e.$inject=["$http","breadcrumbs","$mdToast","authentication","$location","$scope"]}(),function(){function e(e,t,n,o,r){var a=this;a.apps={},a.categoryMaster=["Applications","HR4U","Connect","Tools","Dashboard","Codes"],a._mdPanel=o,a.selected=[],a.file={},a.newApp={name:"",category:"",desc:"",imagePath:"",url:""},a.editApp={name:"",category:"",desc:"",imagePath:"",url:""};var i=function(){e.get("/appsGate/appTxns").then(function(e){a.apps=e.data}).catch(function(e){console.error("Error",e.status,e.data)}).finally(function(){console.log("init complete")})};i(),a.newAppPanel=function(){var e=a._mdPanel.newPanelPosition().absolute().center(),t={attachTo:angular.element(document.body),controller:function(){return a},controllerAs:"vm",disableParentScroll:a.disableParentScroll,templateUrl:"panel.tmpl.html",hasBackdrop:!0,panelClass:"demo-dialog-example",position:e,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!0};a._mdPanelRef=a._mdPanel.create(t),a._mdPanelRef.open()},a.submit=function(){$scope.form.file.$valid&&$scope.file&&$scope.upload($scope.file)},a.upload=function(){a.progressVisible=!0,r.upload({url:"/appsGate/upload",method:"POST",arrayKey:"",data:a.file}).then(function(e){console.log("Success "+e.config.data.file.name+"uploaded. Response: "+e.data),a.newApp.imagePath=e.data.path},function(e){console.log("Error status: "+e.status)},function(e){a.progressPercentage=parseInt(100*e.loaded/e.total),console.log("progress: "+a.progressPercentage+"% "+e.config.data.file.name)})},a.uploadEdit=function(){a.progressVisible=!0,r.upload({url:"/appsGate/upload",method:"POST",arrayKey:"",data:a.editfile}).then(function(e){console.log("Success "+e.config.data.file.name+"uploaded. Response: "+e.data),a.editApp.imagePath=e.data.path},function(e){console.log("Error status: "+e.status)},function(e){a.progressPercentage=parseInt(100*e.loaded/e.total),console.log("progress: "+a.editProgressPercentage+"% "+e.config.data.file.name)})},a.addNewActivity=function(){return""==a.newApp.name||""==a.newApp.category||""==a.newApp.desc||""==a.newApp.url||""==a.newApp.imagePath?void n.show(n.simple().textContent("All fields mandatory!")):void e.post("/appsGate/updateAppTxns",{action:"add",txn:a.newApp}).then(function(){i()}).catch(function(e){console.error("Gists error",e.status,e.data)}).finally(function(){a.closeDialog(),n.show(n.simple().textContent("Application Added!"))})},a.getImage=function(e){return console.log(e),e.imagePath.split("\\")[e.imagePath.split("\\").length-1]},a.editAppDialog=function(e){a.editApp=e;var t=a._mdPanel.newPanelPosition().absolute().center(),n={attachTo:angular.element(document.body),controller:function(){return a},controllerAs:"vm",disableParentScroll:a.disableParentScroll,templateUrl:"editpanel.tmpl.html",hasBackdrop:!0,panelClass:"demo-dialog-example",position:t,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!0};a._mdPanelRef=a._mdPanel.create(n),a._mdPanelRef.open()},a.confirmEdit=function(){return""==a.editApp.name||""==a.editApp.category||""==a.editApp.desc||""==a.editApp.url||""==a.editApp.imagePath?void n.show(n.simple().textContent("All fields mandatory!")):void e.post("/appsGate/updateAppTxns",{action:"update",txn:a.editApp}).then(function(){i()}).catch(function(e){console.error("Gists error",e.status,e.data)}).finally(function(){a.closeDialog(),n.show(n.simple().textContent("Changes Saved!"))})},a.deleteTxn=function(){e.post("/appsGate/updateAppTxns",{action:"delete",txn:a.selected}).then(function(){i()}).catch(function(e){console.error("Gists error",e.status,e.data)}).finally(function(){a.closeDialog(),n.show(n.simple().textContent("Deleted!")),i()})},a.closeDialog=function(){a.newApp={name:"",category:"",desc:"",imagePath:"",url:""},a.editApp={name:"",category:"",desc:"",imagePath:"",url:""},a._mdPanelRef&&a._mdPanelRef.close().then(function(){angular.element(document.querySelector(".demo-dialog-open-button")).focus(),a._mdPanelRef.destroy()})}}angular.module("processFactory").controller("appsCtrl",e),e.$inject=["$http","breadcrumbs","$mdToast","$mdPanel","Upload","$mdDialog"]}(),function(){function e(e,t,n,o,r,a,i){function c(){e.get("/pFactory/plans/"+t.query._a).then(function(n){t.plans=n.data.all,t.currentPlan=n.data.this[0],console.log(t.currentPlan),e.post("/pFactory/nextSub",{txn:t.query._a,_t:"HRMS"}).then(function(e){t.nextSub=e.data,t.nextSub.subOn=moment(t.nextSub.subOn).format("LLL"),t.nextSub.expireOn=moment(t.nextSub.expireOn).format("LLL"),1==t.nextSub.expired&&(t.message="Your "+t.currentPlan.identifier+" plan has expired on "+t.nextSub.expireOn),0==t.nextSub.expired&&(t.message="Your "+t.currentPlan.identifier+" plan will expire in "+parseInt(t.nextSub.days)+" days")},function(e){400==e.status&&e.data.message&&(t.message=e.data.message)}),r.saveToken(n.data.token)},function(){t.plans=[]}),e.get("/users/getProfile/"+t.email).then(function(e){t.phone=e.data[0].personal_info.mobile},function(){})}t.query=Object.assign({},i.search());var s=JSON.parse(window.atob(t.query.access_token.split(".")[1]));t.showPromo=!1,t.imagePath="/img/gear.png",t.firstname=s.fn,t.lastname=s.ln,t.user=s._id,t.org=s._orgId,t.surl=window.location.origin+"/pay/checkout/success",t.furl=window.location.origin+"/pay/checkout/failure",t.email=s.email,t.pfSuccessRedirectUri=atob(t.query._rd),c();t.openMenu=function(e,t){originatorEv=t,e(t),$("#planDetailsMenu").addClass("arr-down")},t.$on("$mdMenuClose",function(){$("#planDetailsMenu").removeClass("arr-down")}),t.checkout=function(e){parseFloat(e.cost)>0?t.getPaymentKeys(e):t.regMod(e)},t.applyPromo=function(n,o){e.post("/pFactory/applypromo",{_p:n._id,_c:o}).then(function(e){n.cost=e.data.amount,n.dc=e.data.dc,n.dp=e.data.dp,n.aa=e.data.aa,t.promoMessage=e.data.message,t.promoIcon="check_circle",document.getElementById("promoMsg").style.color="green"},function(e){t.promoMessage=e.data.message,t.promoIcon="cancel",n.cost=e.data.amount,n.dc=e.data.dc,n.dp=e.data.dp,n.aa=e.data.aa,document.getElementById("promoMsg").style.color="red"})},t.regMod=function(n){e.post("/pFactory/regMod",{_p:n._id,_o:s._orgId,_imft:s._imft,_r:t.query._r,_a:t.query._a}).then(function(e){o.open(t.pfSuccessRedirectUri+"?access_token="+e.data+"&appid="+t.query._a,"_self")},function(){a.show(a.simple().textContent("Service unavailable at this point of time"))})},t.submitForm=function(){payuform.submit()},t.getPaymentKeys=function(n){t.amount=parseFloat(n.cost).toFixed(2),t.plan=n;var o={a:t.amount,fn:t.firstname,e:t.email,ap:n._id,o:t.org,u:t.user,rs:t.pfSuccessRedirectUri,dp:t.plan.dp,dc:t.plan.dc,aa:t.plan.aa,origin:window.location.href};e.post("/pay/getPaymentKeys",o).then(function(e){payuform.productinfo.value=e.data.pi,payuform.key.value=e.data.key,payuform.hash_string.value=e.data.hashString,payuform.hash.value=e.data.hash,payuform.txnid.value=e.data.txnid,payuform.submit()},function(){})}}angular.module("processFactory").controller("choosePlanController",e),e.$inject=["$http","$scope","$rootScope","$window","authentication","$mdToast","$location"]}(),function(){function e(e,t,n,o,r,a){var i=this,c=0;i.currentUser=o.currentUser(),i.selected=[],init=function(){e.post("/pFactory/userCheck",{email:o.currentUser().email}).success(function(e){i.data=e,console.log(i.data),i.order=i.data.userConfig?"":"-noOfHits";for(var t=0;t<i.data.txns.length;t++)c+=parseInt(i.data.txns[t].noOfHits);c/=i.data.txns.length})},init(),i.data={},i.saveFlag=!1,i.showSearch=!1,i.limit=10,i.getCategoryColor=function(e){return{"background-color":i.categoryColor[e]}},i.isMostUsed=function(e){return e.noOfHits>=c},i.click=function(t){var n=o.getToken();'"'==n.charAt(0)&&(n=n.replace('"',"")),n.endsWith('"')&&(n=n.replace('"',""));var r=t.txn.url+"?access_token="+n+"&appid="+t.txn._id;window.open(r,"_blank"),e.post("/pFactory/noOfHits",{userId:i.data._id,txnId:t.txn._id}).then(function(){init()})},i.breadcrumbs=t,i.Math=window.Math,i.parseInt=parseInt,i.logout=function(){e.get("/pFactory/logout/").then(function(e){200===e.status&&(o.logout(),r.path("/"))}).catch(function(){}).finally(function(){})},i.getImage=function(e){return e.split("\\")[e.split("\\").length-1]},i.openMenu=function(e,t){originatorEv=t,e(t),$("#profileMenu").addClass("arr-down")},a.$on("$mdMenuClose",function(){$("#profileMenu").removeClass("arr-down")})}angular.module("processFactory").controller("homeCtrl",e),e.$inject=["$http","breadcrumbs","$mdToast","authentication","$location","$scope"]}(),function(){function e(e,t,n,o,r,a,i,c){function s(){e.get("/users/getProfile/"+t.email).then(function(e){t.phone=e.data[0].personal_info.mobile},function(){})}var l="PEOPLE";t.email=r.currentUser().email,s();var u=c.search();t.plan=u.plan,t.plan.cost=parseFloat(t.plan.cost).toFixed(2),t.imagePath="/img/gear.png",t.productinfo=l+" - "+t.plan.identifier,t.firstname=r.currentUser().fn,t.lastname=r.currentUser().ln,t.user=r.currentUser()._id,t.org=r.currentUser().org,t.surl=window.location.origin+"/pay/checkout/success",t.furl=window.location.origin+"/pay/checkout/failure",t.pfSuccessRedirectUri=window.location.origin+t.org+"/checkout/success",t.pfFailureRedirectUri=window.location.origin+t.org+"/checkout/failure",t.submitForm=function(){payuform.submit()},t.getPaymentKeys=function(){var n={a:t.plan.cost,pi:t.productinfo,fn:t.firstname,e:t.email,ap:t.plan._id,o:t.org,u:t.user,rs:t.pfSuccessRedirectUri,rf:t.pfFailureRedirectUri};console.log(n),e.post("/pay/getPaymentKeys",n).then(function(e){payuform.elements.key.value=e.data.key,payuform.elements.hash_string.value=e.data.hashString,payuform.elements.hash.value=e.data.hash,payuform.elements.txnid.value=e.data.txnid,payuform.submit()},function(){})}}angular.module("processFactory").controller("paymentController",e),e.$inject=["$http","$scope","$rootScope","$window","authentication","$mdToast","$mdDialog","$location"]}(),function(){function e(e,t,n,o,r,a,i,c){t.query=c.search(),t.query.hasOwnProperty("txnid")&&e.get("/pay/g/"+t.query.txnid).then(function(){},function(){})}angular.module("processFactory").controller("paymentFailureController",e),e.$inject=["$http","$scope","$rootScope","$window","authentication","$mdToast","$mdDialog","$location"]}(),function(){function e(){}angular.module("processFactory").controller("paymentSuccessController",e),e.$inject=["$http","$scope","$rootScope","$window","auth","$state","$stateParams","$mdToast","$mdDialog"]}(),function(){function e(e,t,n,o,r){var a=this;a.noOfTabs=2,a.isSelected=!1,a.sectors=["AGRICULTURE","AUTOMOBILES","AUTO COMPONENTS","AVIATION","BANKING","BIOTECHNOLOGY","CEMENT","CONSUMER MARKETS","EDUCATION AND TRAINING","ENGINEERING","FINANCIAL SERVICES","FOOD PROCESSING","GEMS AND JEWELLERY","HEALTHCARE","INFRASTRUCTURE","INSURANCE","IT & ITES","MANUFACTURING","MEDIA AND ENTERTAINMENT","OIL AND GAS","PHARMACEUTICALS","REAL ESTATE","RESEARCH AND DEVELOPMENT","RETAIL","SCIENCE AND TECHNOLOGY","SEMICONDUCTOR","SERVICES","STEEL","TELECOMMUNICATIONS","TEXTILES","TOURISM AND HOSPITALITY","URBAN MARKET","OTHERS"],a.strengths=["< 10","10 - 100","101-500","501-1000"," > 1000"],a.selectedTab=0,a.notification="",a.username=n.currentUser().name,a.disableNext=!0,a.orgName=n.currentUser().orgName,a.commit=function(){str="form"+(a.selectedTab+1),document.getElementsByName(str)[0].checkValidity()?(a.notification="",0==a.selectedTab&&e.post("/pFactory/setupOrg/"+n.currentUser().org,a.org).then(function(){e.post("/pFactory/commitImft",{_i:n.currentUser()._id}).then(function(){e.get("/users/new_t?token="+window.localStorage._pft).then(function(e){n.saveToken(e.data.success),o.path("/")},function(){t.show(t.simple().textContent("Try again.").position("top right").hideDelay(3e3))})},function(e){console.log("error",e),t.show(t.simple().textContent("Try again.").position("top right").hideDelay(3e3))})},function(e){console.log("error",e)})):a.notification="Please fill in the mandatory fields"},a.upload=function(){a.progressVisible=!0,r.upload({url:"/pFactory/upload",method:"POST",arrayKey:"",data:a.file}).then(function(e){console.log("Success "+e.config.data.file.name+"uploaded. Response: "+e.data),a.org.logo=e.data.path},function(e){console.log("Error status: "+e.status)},function(e){a.progressPercentage=parseInt(100*e.loaded/e.total),console.log("progress: "+a.progressPercentage+"% "+e.config.data.file.name)})},a.logout=function(){e.get("/pFactory/logout/").then(function(e){200===e.status&&(n.logout(),o.path("/"))}).catch(function(){}).finally(function(){})}}angular.module("processFactory").controller("setupCtrl",e),e.$inject=["$http","$mdToast","authentication","$location","Upload"]}(),function(){function e(e,t){var n=this;n.showResponse="",n.forgot={email:""},n.onSubmit=function(){t.forgot(n.forgot).error(function(){}).then(function(e){n.showResponse=e.data})}}angular.module("processFactory").controller("forgotCtrl",e),e.$inject=["$location","authentication"]}(),function(){function e(e,t){var n=this;n.notification="",n.credentials={email:"",password:""},n.onSubmit=function(){n.notification="",t.login(n.credentials).error(function(e){n.notification=e.message}).then(function(){e.path("/home")})}}angular.module("processFactory").controller("loginCtrl",e),e.$inject=["$location","authentication"]}(),function(){function e(e,t){var n=this;n.notification="",n.register={first_name:"",last_name:"",email:"",password:"",organization:""},n.fireConversion=function(){window.google_trackConversion({google_conversion_id:945159590,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_label:"f1CbCNSgnXUQpvvXwgM",google_remarketing_only:!1})},n.onSubmit=function(){n.notification="",t.register(n.register).error(function(e){n.notification=e.message}).then(function(e){200==e.status?(n.showConfirmation=!0,n.customer_id=e.data.custId):n.notification=e.message})},n.forMobile=function(e){e.keyCode>=48&&e.keyCode<=57||9==e.keyCode||8==e.keyCode||46==e.keyCode||37==e.keyCode||39==e.keyCode||e.preventDefault()}}angular.module("processFactory").controller("registerCtrl",e),e.$inject=["$location","authentication","$window"]}(),function(){function e(e,t){var n=function(e){t.localStorage._pft=e},o=function(){return t.localStorage._pft},r=function(){var e,n=o();return n?(e=n.split(".")[1],e=t.atob(e),e=JSON.parse(e),!0):!1},a=function(){if(r()){var e=o(),n=e.split(".")[1];return n=t.atob(n),n=JSON.parse(n),{email:n.email,name:n.name,org:n._orgId,orgName:n._orgName,_id:n._id,_imft:n.pf_imft,fn:n.fn,ln:n.ln,_m:n._m,_mv:n._mv,_pfr:n._pfr}}};return register=function(t){return e.post("/pFactory/register",t).success(function(){})},forgot=function(t){return e.post("/pFactory/forgot",t).success(function(){})},login=function(t){return e.post("/pFactory/login",t).success(function(e){n(e.token)})},logout=function(){t.localStorage.removeItem("_pft")},{currentUser:a,saveToken:n,getToken:o,isLoggedIn:r,register:register,login:login,logout:logout,forgot:forgot}}angular.module("processFactory").service("authentication",e),e.$inject=["$http","$window"]}(),function(){function e(){var e={};return{getProp:function(t){return e[t]},setProp:function(t,n){e[t]=n}}}angular.module("processFactory").service("breadcrumbHelper",e),e.$inject=["$http"]}(),function(){function e(e,t){var n=function(){return e.get("/pFactory/profile",{headers:{Authorization:"Bearer "+t.getToken()}})};return{getProfile:n}}angular.module("processFactory").service("meanData",e),e.$inject=["$http","authentication"]}(),function(){function e(e){return{get:function(){return e.get("/getMetadata")}}}angular.module("processFactory").factory("metadata",e),e.$inject=["$http"]}(),function(){function e(e,t,n){return notifs=new Array,init=function(){var e=io.connect("/notif");return e.on(n.currentUser().org+"/pf/"+n.currentUser()._id,function(e){console.log(JSON.stringify(e)),notifs.push(e),console.log(notifs)}),notifs},{init:init}}angular.module("processFactory").service("notification",e),e.$inject=["$http","$window","authentication"]}(),function(){function e(e,t){var n=!1;return{request:function(t){return n?void 0:t||e.when(t)},requestError:function(t){return e.reject(t)},response:function(t){return t||e.when(t)},responseError:function(n){return n&&401===n.status&&(t.localStorage.removeItem("_pft"),t.location.href=window.location.origin),e.reject(n)}}}angular.module("processFactory").factory("errorInterceptor",e),e.$inject=["$q","$window"]}(),function(){function e(e,t,n,o,r,a){function i(){s=io.connect("/notif"),s.on(t.currentUser().org+"/pf/"+t.currentUser()._id,function(e){e.item.sentence=r.trustAsHtml(e.item.sentence+" by <b>"+e.item.from.name+"</b>"),l.notifs.unshift(e),c()}),a.get("/notifs/notifications/"+t.currentUser().org+"/pf/"+t.currentUser()._id).then(function(e){_.each(e.data,function(e){e.item.sentence=r.trustAsHtml(e.item.sentence+" by <b>"+e.item.from.name+"</b>")}),l.notifs=e.data,c()},function(){})}function c(){document.getElementById("notifBadge").innerText=_.where(l.notifs,{seen:!1}).length}var s,l=this;l.notifs=new Array,o.unseenCount=0,i(),l.getTimeDiff=function(e){return moment(e).fromNow()},l.openMenu=function(e,t){var n=new Array;originatorEv=t,e(t),$("#notifMenu").addClass("arr-down"),_.each(l.notifs,function(e){e.seen||n.push(e._id),e.seen=!0}),c(),0!=n.length&&s.emit("updateNotif",n)},o.$on("$mdMenuClose",function(){$("#notifMenu").removeClass("arr-down")}),l.goToNotif=function(t){var n="/"+t.item.module;t.item.navId&&(n=n+"/"+t.item.navId),s.emit("updateAction",t._id),e.path(n)}}angular.module("processFactory").controller("notificationCtrl",e),e.$inject=["$location","authentication","$mdMenu","$scope","$sce","$http"]}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/notification/notification.template.html",controller:"notificationCtrl as notifvm"}}angular.module("processFactory").directive("notification",e)}(),function(){function e(e,t,n,o,r){function a(e){var t=o.debounce(function(){n(e).toggle()},100);return t}var i=this;i.breadcrumbs=r,i.isLoggedIn=t.isLoggedIn(),i.currentUser=t.currentUser(),i.toggleLeft=a("left"),i.close=function(){n("left").open().then(function(){})}}angular.module("processFactory").controller("navigationCtrl",e),e.$inject=["$location","authentication","$mdSidenav","$mdUtil","breadcrumbs","$routeParams"]}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("processFactory").directive("navigation",e)}(),function(){function e(e){e.pw=""}angular.module("processFactory").controller("pwStrengthCtrl",e),e.$inject=["$scope"]}(),function(){function e(){return{replace:!1,restrict:"EACM",scope:{model:"=pwStrength"},link:function(e,t){var n={colors:["#F00","#F90","#FF0","#9F0","#0F0"],mesureStrength:function(e){var t=0,n=/[$-\/:-?{-~!"^_`\[\]]/g,o=/[a-z]+/.test(e),r=/[A-Z]+/.test(e),a=/[0-9]+/.test(e),i=n.test(e),c=[o,r,a,i],s=$.grep(c,function(e){return e===!0}).length;return t+=2*e.length+(e.length>=10?1:0),t+=10*s,t=e.length<=6?Math.min(t,10):t,t=1==s?Math.min(t,10):t,t=2==s?Math.min(t,20):t,t=3==s?Math.min(t,40):t},getColor:function(e){var t=0;return t=10>=e?0:20>=e?1:30>=e?2:40>=e?3:4,{idx:t+1,col:this.colors[t]}}};e.$watch("model",function(e){if(e&&""!==e){var o=n.getColor(n.mesureStrength(e));t.css({display:"inline"}),t.children("li").css({background:"#DDD"});for(var r=0;r<=o.idx;r++)$(t.children("li")[r]).css({background:o.col})}else t.css({display:"none"})})},template:'<li class="point"></li><li class="point"></li><li class="point"></li><li class="point"></li><li class="point"></li>'}}angular.module("processFactory").directive("pwStrength",e)}();
//# sourceMappingURL=app.min.js.map
